# 后悔药

![](2022-12-05-22-41-13.png)

### ```git restore```

#### ```git restore [文件名]```，撤回工作区中的修改

![](2022-12-05-22-46-29.png)

#### ```git restore --staged [文件名]```，撤回暂存区中的修改

对文件```a.txt```的修改已经放入**暂存区**
![](2022-12-05-22-52-20.png)

![](2022-12-05-22-55-53.png)

![](2022-12-05-22-57-04.png)

此时，**暂存区**的修改已经撤回，如果要撤回**工作区**的修改，再依次操作

#### ```git commit --amend```，撤回版本库中的修改

情况零：
提交的文件内容有误
那就修改完成后重新提交

情况一：
提交日志写错了，导致日志不干净
![](2022-12-05-23-13-32.png)

![](2022-12-05-23-18-21.png)

使用```git commit --amend```命令
![](2022-12-05-23-22-03.png)

将写错的日志修改到正确
![](2022-12-05-23-21-29.png)



情况二：
文件被暂存后，又被修改了，但是忘了暂存，就提交了
![](2022-12-05-23-30-16.png)

![](2022-12-05-23-32-52.png)

发现自动把**未暂存的修改**暂存了
![](2022-12-05-23-35-38.png)

这里重新测试了一遍，发现确实是这样
![](2022-12-05-23-45-27.png)

这里有些翻车 上网查查

到P17