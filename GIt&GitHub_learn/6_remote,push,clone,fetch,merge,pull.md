# 本地库和远程库的交互（团队内合作）

![](2022-11-25-16-24-04.png)

### 在Github创建远程库

![](2022-11-27-21-05-10.png)

![](2022-11-27-21-08-15.png)

上图中，远程库的地址为```https://github.com/kong-zj/testGit.git```
远程库的地址很长，这里可以在本地创建远程库地址的别名

### remote 给远程库起别名

#### ```git remote -v```命令，用于查看保存的地址的别名

![](2022-11-27-21-14-47.png)

#### ```git remote add```命令，用于给地址起别名

![](2022-11-27-21-17-58.png)

![](2022-11-27-21-18-25.png)

### push 推送操作

#### ```git push [远程库的别名] [要推送的分支名]```命令，用于将某一分支推送到远程库

![](2022-11-27-21-22-25.png)

跳出弹框如下图

![](2022-11-27-21-24-19.png)

![](2022-11-27-21-25-07.png)

授权之后，推送操作成功，如下图

![](2022-11-27-21-25-48.png)

Github上显示如下图

![](2022-11-27-21-27-06.png)

### clone 克隆操作

进入另一个目录

![](2022-11-27-21-29-37.png)

在Github中复制远程库的地址，这里为```git@github.com:kong-zj/testGit.git```

![](2022-11-27-21-30-59.png)

![](2022-11-27-21-38-08.png)

#### ```git clone```命令，用于从远程库克隆到本地

这里使用```ssh```协议提示被拒绝，因为没有在GitHub中授权，所以先用```https```协议

![](2022-11-27-21-37-51.png)

![](2022-11-27-21-36-46.png)

#### 克隆的三个效果

1. 完整地把远程库下载到本地
2. 初始化本地库
3. 创建```origin```远程地址别名

![](2022-11-27-21-42-23.png)

### 邀请团队成员加入

如果用另一个没有授权的GitHub账号做push操作，会提示没有权限而失败

![](2022-11-27-21-45-55.png)

要把这个账号授权，邀请他加入团队

![](2022-11-27-21-51-16.png)

![](2022-11-27-21-53-44.png)

![](2022-11-27-21-54-46.png)

![](2022-11-27-21-55-24.png)

变成团队成员后，就可以push操作了

### pull=fetch+merge 拉取操作

##### ```fetch```和```merge```操作分开来做，可以暂时不对本地的文件做合并，浏览从远程库下载下来的东西后再合并，也可以用```pull```操作来一步完成拉取和合并

经过他人的push，**Github**中文件```apple.txt```的内容如下

![](2022-11-27-22-25-08.png)

当前**工作区**中文件```apple.txt```的内容如下

![](2022-11-27-22-26-49.png)

#### 第一步：```git fetch [远程库的别名] [要抓取的分支名]```命令，用于从远程库拉取修改到本地

![](2022-11-27-22-32-29.png)

此时，**工作区**中文件```apple.txt```并没有改变，内容如下

![](2022-11-27-22-34-17.png)

#### ```git checkout```命令，切换到```testGit_https/master```，可以看到```fetch```下来的新的内容

![](2022-11-27-22-37-21.png)

再```git checkout```切换回去

#### 第二步：```git merge```命令，用于把远程库的master合并到本地库的master

![](2022-11-27-22-45-28.png)

![](2022-11-27-22-50-31.png)

#### 两步可以合为一步：```git pull [远程库的别名] [要抓取的分支名]```命令，用于将远程库拉取到本地并合并到本地库

经过他人的push，Github中文件apple.txt的内容如下

![](2022-11-27-22-58-12.png)

![](2022-11-27-23-04-28.png)

### 团队合作，push到远程库的冲突

1. 两个人修改同一文件的同一位置（行），先push的人可以成功，第二个push的人不是在远程库的最新版的基础上修改的，是在旧版本上所做的修改，Github不接受第二个人的push
2. 第二个人只能先pull最新版的代码，进入冲突状态，按照“在合并中产生冲突”来解决

第一个push的人，将apple.txt修改为如下图，并成功push到Github

![](2022-11-28-16-04-43.png)

第二个想要push的人，将apple.txt修改为如下图

![](2022-11-28-16-08-49.png)

第二个人不能成功push到Github，因为push的内容不是根据GitHub远程库的最新版修改的

![](2022-11-28-16-11-33.png)

第二个人要先pull下最新版

![](2022-11-28-16-19-16.png)

![](2022-11-28-16-20-16.png)

按照“在合并中产生冲突”来解决

修改冲突的文件内容

![](2022-11-28-16-23-50.png)

使用```git add```（要带文件名）标记冲突已解决
使用```git commit```（不能带文件名）来结束合并

![](2022-11-28-16-27-15.png)

这时，第二个人的本地库是按照Github远程库的最新版修改的，所以可以成功push

![](2022-11-28-16-31-28.png)

模型：[乐观锁，悲观锁](https://zhuanlan.zhihu.com/p/82745364)

![](2022-11-27-23-19-41.png)

总结：
![](2022-12-07-16-08-30.png)

![](2022-12-07-16-13-38.png)

![](2022-12-07-16-49-41.png)
如果没有跟踪，可以使用```git push [别名] [分支名]```来推送，就可以不用上图那么麻烦

跟踪的方法：
![](2022-12-07-21-47-29.png)


