# 分支管理

![](resources/2022-11-26-23-30-22.png)

git工作流

![](resources/2022-11-28-17-44-43.png)

![](resources/2022-11-26-23-54-53.png)

## branch 查看和创建分支

### ```git branch -v```命令，用于查看当前所有分支

![](resources/2022-11-26-23-34-10.png)

### ```git branch```命令，用于创建新的分支

![](resources/2022-11-26-23-35-52.png)

此时，两个分支提交的信息是一致的

### ```git branch -M [新的分支名]```，用于修改当前的分支名

![](resources/2022-12-12-00-18-39.png)
为了和Github上的远程分支的名字对应，这里修改分支名

## checkout 切换分支

### ```git checkout```命令，用于切换分支

![](resources/2022-11-26-23-37-58.png)

在```hot_fix```分支下修改good.txt文件

![](resources/2022-11-26-23-40-29.png)

同步到**本地库**

![](resources/2022-11-26-23-41-58.png)

此时，```hot_fix```的版本往前推进一步，两个分支提交的信息不一致

## merge 合并分支

1. 先切换到接收修改的分支（被合并，增加新内容）

### ```git checkout```命令，用于切换分支

![](resources/2022-11-26-23-49-38.png)

2. 执行合并命令

### ```git merge```命令，表示把哪一个分支的修改，合并到当前的分支

![](resources/2022-11-26-23-52-04.png)

![](resources/2022-11-26-23-55-45.png)

## 在合并中产生冲突

在**不同分支**中修改**同一个文件的同一位置（以“行”为单位）**

在```master```分支中修改good.txt如下，并同步到**本地库**

![](resources/2022-11-27-16-35-29.png)

在```hot_fix```分支中修改good.txt如下，并同步到**本地库**

![](resources/2022-11-27-16-38-02.png)

将```master```合并到```hot_fix```

![](resources/2022-11-27-16-41-08.png)

自动合并失败，转为手动合并

```(hot_fix|MERGING)```表示处于正在合并的状态

### 冲突的表现

good.txt的内容如下图所示

![](resources/2022-11-27-16-45-41.png)

1. 8~9行是当前分支的内容
2. 11~12行是另一分支的内容

在vim中用```:set nu```显示行号

### 冲突的解决

删去第8、10、12行，并把冲突的内容编辑到满意为止

![](resources/2022-11-27-16-53-20.png)

![](resources/2022-11-27-16-54-26.png)

使用```git add```来标记冲突已解决

![](resources/2022-11-27-16-56-27.png)

使用```git commit```来结束合并

![](resources/2022-11-27-16-59-12.png)

注意这里```git commit```不能带文件名，不然会报错

![](resources/2022-11-27-17-01-07.png)
